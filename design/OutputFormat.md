Output Format
=============

This document describes the output generated by [dual_scan.py](https://github.com/TheFinks/Fossology-Ninka/blob/master/src/dual_scan.py).

The output format is JSON based on a small subset of [SPDX 1.2](https://spdx.org/SPDX-specifications/spdx-version-1.2) including basic file and licensing fields. We aim for interoperability with the [do_spdx()](https://github.com/chaughawout/Do_SPDX/) project.

The primary goal for this program is to determine what licenses exist within a program or package by leveraging different license scanners that may excel at finding different licenses. To estimate the reliability of our output, we need to know which scanner(s) found which license(s). Accordingly, the most important sections of our output will be the **License Concluded** and **License Comments** sections. They respectively declare what licenses were found and by which scanner.

Example Output
--------------

The following is an example of what the end user should expect from our program in its current status.

	{
		"file_level_info":[
		{
			"FileName":"dual_scan.py",
			"FileType":"SOURCE",
			"FileChecksum":"12ff6dcb6e1a3cfeb95aabb83eaf25d29832dcde",
			"FileChecksumAlgorithm":"SHA1",
			"FileLicenseComments":"#FOSSology (names may not be SPDX standards compliant)",
			"LicenseConcluded":"Apache-2.0",
			"LicenseInfoInFile":"NOASSERTION",
			"FileCopyrightText":"NOASSERTION<Vtext>"
		},
		],
	}

License Identification Scenarios
--------------------------------

The following examples depict how our program will represent the licenses found and which scanning tool(s) found them.

**License Concluded** will display the license found only if both scanning tools found the same licenses. If each tool found a different license then the License Concluded section will contain "NOASSERTION". The same will happen if one tool finds a license and the other tool does not find any license.

In the **License Comments** section the individual scan results will be displayed in a hashtag format.

 - If all scanners agree on a license, or no scanner found a license, each scanner will have a tag of `#scanner`.
 - If scanners returned different results, each scanner will have a tag of `#scanner:license`. The `license` will be `none` if a scanner did not find a license.
 
### Examples:

1. Two scanners both find an MIT license
 - License Concluded: MIT
 - License Comments: #fossology #ninka
 
2. Two scanners both find no license.
 - License Concluded: None
 - License Comments: #fossology #ninka

3. Two scanners each find different licenses.
 - License Concluded: NOASSERTION
 - License Comments: #fossology:MIT #ninka:BSD-3

4. One scanner finds a license, one does not.
 - License Concluded: NOASSERTION
 - License Comments: #fossology:none #ninka:BSD-3

[do_spdx()](https://github.com/chaughawout/Do_SPDX/) Compatibility
------------------------------------------------------------------
 
In order for our program to work with the [do_spdx()](https://github.com/chaughawout/Do_SPDX/) group we had to make a few changes.

Post scanning, the program takes the package name, file name, licenses concluded, and comments (for conflicts and the like) and dumps them into a JSON object. We also added the file's SHA-1 checksum so other tools can verify they have a JSON object for the right file.

do_spdx doesn't use all of our data, but it's all still passed their way (because we are pretty sure later versions are 
going to want to have license comments, as their needed object is pre-SPDX-1.2).
